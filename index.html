<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>La Team</title>

<style>
:root{
  --bg1:#1f8a70;
  --bg2:#004e92;
  --card:rgba(255,255,255,0.12);
  --card2:rgba(0,0,0,0.25);
  --btn:#00c9a7;
  --btnText:#003;
  --muted:rgba(255,255,255,0.8);
}

*{box-sizing:border-box;}

body{
  margin:0;
  font-family:Arial,sans-serif;
  color:#fff;
  min-height:100vh;

  /* üéæ FOND UNIQUE PADEL ‚Äì SVG int√©gr√© */
  background:
    linear-gradient(
      135deg,
      rgba(31,138,112,0.92),
      rgba(0,78,146,0.92)
    ),
    url("data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 800'>\
<rect width='800' height='800' fill='none'/>\
<circle cx='400' cy='400' r='260' stroke='white' stroke-opacity='0.07' stroke-width='16' fill='none'/>\
<line x1='400' y1='140' x2='400' y2='660' stroke='white' stroke-opacity='0.05' stroke-width='10'/>\
<line x1='140' y1='400' x2='660' y2='400' stroke='white' stroke-opacity='0.05' stroke-width='10'/>\
<ellipse cx='560' cy='220' rx='28' ry='38' fill='white' fill-opacity='0.06'/>\
<rect x='520' y='260' width='90' height='14' rx='7' fill='white' fill-opacity='0.06'/>\
</svg>");
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
}

.container{
  max-width:900px;
  margin:auto;
  padding:16px;
}

h1,h2{text-align:center;margin:10px 0;}
.small{text-align:center;color:var(--muted);font-size:14px;}

.card{
  background:var(--card);
  padding:16px;
  border-radius:14px;
  margin-bottom:14px;
}

input,select,button{
  width:100%;
  padding:12px;
  margin-top:8px;
  border-radius:10px;
  border:none;
  font-size:16px;
}

button{
  background:var(--btn);
  color:var(--btnText);
  font-weight:800;
  cursor:pointer;
}

button.secondary{
  background:rgba(255,255,255,0.18);
  color:#fff;
}

button:disabled{opacity:0.5;}

.row{display:flex;gap:10px;}
.row>div{flex:1;}

.hidden{display:none;}

table{width:100%;border-collapse:collapse;}
th,td{padding:8px;text-align:center;}
th{background:var(--card2);}
</style>
</head>

<body>
<div class="container">
<h1>üéæ La Team</h1>

<!-- MENU -->
<div id="setup" class="card">
<h2>Menu principal</h2>

<label>Nombre de joueurs</label>
<select id="playerCount">
  <option value="4">4 joueurs</option>
  <option value="6">6 joueurs</option>
  <option value="8">8 joueurs</option>
</select>

<div id="players"></div>

<label>Points pour gagner</label>
<select id="maxPoints">
  <option>7</option>
  <option selected>10</option>
  <option>15</option>
  <option>21</option>
</select>

<button onclick="startGame()">D√©marrer</button>
</div>

<!-- JEU -->
<div id="game" class="hidden">
<div class="card">
<h2>Matchs</h2>
<div id="courts"></div>

<div class="row">
<div>
<button class="secondary" onclick="backToMenu()">üè† Menu principal</button>
</div>
<div>
<button onclick="nextMatch()" id="nextBtn" disabled>Match suivant</button>
</div>
</div>
</div>

<div class="card">
<h2>Classement</h2>
<table>
<thead>
<tr><th>Joueur</th><th>MJ</th><th>V</th><th>+</th><th>-</th><th>Diff</th></tr>
</thead>
<tbody id="ranking"></tbody>
</table>
</div>
</div>

<!-- FIN -->
<div id="finish" class="hidden">
<div class="card">
<h2>‚úÖ FINISH</h2>
<table>
<thead>
<tr><th>#</th><th>Joueur</th><th>MJ</th><th>V</th><th>+</th><th>-</th><th>Diff</th></tr>
</thead>
<tbody id="finalRanking"></tbody>
</table>

<label>Nouvelle partie ‚Äì nombre de joueurs</label>
<select id="finishPlayers">
<option value="4">4 joueurs</option>
<option value="6">6 joueurs</option>
<option value="8">8 joueurs</option>
</select>

<button onclick="newGame()">Nouvelle partie</button>
</div>
</div>

</div>

<script>
let players=[],matches=[],round=0,validated=false,maxPoints=10;

const playersDiv=document.getElementById("players");
function renderInputs(){
playersDiv.innerHTML="";
for(let i=0;i<playerCount.value;i++)
playersDiv.innerHTML+=`<input id="p${i}" placeholder="Joueur ${i+1}">`;
}
playerCount.onchange=renderInputs;
renderInputs();

function startGame(){
players=[];
for(let i=0;i<playerCount.value;i++)
players.push({name:p(i),mj:0,v:0,plus:0,minus:0});
maxPoints=+maxPoints.value;
matches=buildMatches(players.length);
round=0;
setup.classList.add("hidden");
game.classList.remove("hidden");
render();
}

function p(i){return document.getElementById("p"+i).value||"J"+(i+1);}

function buildMatches(n){
if(n===4)return[
[[0,1],[2,3]],[[0,2],[1,3]],[[0,3],[1,2]]
];
if(n===8)return[
[[0,1],[2,3]],[[4,5],[6,7]]
];
return [[[0,1],[2,3]]];
}

function render(){
if(round>=matches.length){finishGame();return;}
courts.innerHTML="";
validated=false;
matches[round].forEach((m,i)=>{
courts.innerHTML+=`
<div class="card">
<b>${players[m[0]].name} / ${players[m[1]].name}</b>
 vs 
<b>${players[m[2]].name} / ${players[m[3]].name}</b>
<select id="a${i}">${opts()}</select>
<select id="b${i}">${opts()}</select>
<button onclick="validate(${i})">Valider</button>
</div>`;
});
}

function opts(){let s="";for(let i=0;i<=maxPoints;i++)s+=`<option>${i}</option>`;return s;}

function validate(i){
const m=matches[round][i];
const a=+document.getElementById("a"+i).value;
const b=+document.getElementById("b"+i).value;
[m[0],m[1]].forEach(x=>upd(x,a,b));
[m[2],m[3]].forEach(x=>upd(x,b,a));
if(a>b){players[m[0]].v++;players[m[1]].v++;}
if(b>a){players[m[2]].v++;players[m[3]].v++;}
validated=true;
renderRanking();
nextBtn.disabled=false;
}

function upd(i,p,m){players[i].mj++;players[i].plus+=p;players[i].minus+=m;}

function renderRanking(){
ranking.innerHTML="";
[...players].sort((a,b)=>b.v-(a.v)||((b.plus-b.minus)-(a.plus-a.minus)))
.forEach(p=>{
ranking.innerHTML+=`<tr><td>${p.name}</td><td>${p.mj}</td><td>${p.v}</td><td>${p.plus}</td><td>${p.minus}</td><td>${p.plus-p.minus}</td></tr>`;
});
}

function nextMatch(){if(!validated)return;round++;nextBtn.disabled=true;render();}

function finishGame(){
game.classList.add("hidden");
finish.classList.remove("hidden");
finalRanking.innerHTML=ranking.innerHTML;
}

function newGame(){
finish.classList.add("hidden");
setup.classList.remove("hidden");
playerCount.value=finishPlayers.value;
renderInputs();
}

function backToMenu(){
if(confirm("Retourner au menu principal ? La partie en cours sera quitt√©e.")){
game.classList.add("hidden");
setup.classList.remove("hidden");
}
}
</script>
</body>
</html>
